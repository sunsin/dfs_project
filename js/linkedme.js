(function(t){function l(c,a){var b=(c&65535)+(a&65535);return(c>>16)+(a>>16)+(b>>16)<<16|b&65535}function n(c,a,b,k,h,m){c=l(l(a,c),l(k,m));return l(c<<h|c>>>32-h,b)}function a(c,a,b,h,k,m,l){return n(a&b|~a&h,c,a,k,m,l)}function k(c,a,b,h,k,m,l){return n(a&h|b&~h,c,a,k,m,l)}function h(c,a,b,h,k,m,l){return n(b^(a|~h),c,a,k,m,l)}function q(c,u){c[u>>5]|=128<<u%32;c[(u+64>>>9<<4)+14]=u;var b,m,q,v,r,d=1732584193,e=-271733879,f=-1732584194,g=271733878;for(b=0;b<c.length;b+=16)m=d,q=e,v=f,r=g,d=a(d,e,f,g,c[b],7,-680876936),g=a(g,d,e,f,c[b+1],12,-389564586),f=a(f,g,d,e,c[b+2],17,606105819),e=a(e,f,g,d,c[b+3],22,-1044525330),d=a(d,e,f,g,c[b+4],7,-176418897),g=a(g,d,e,f,c[b+5],12,1200080426),f=a(f,g,d,e,c[b+6],17,-1473231341),e=a(e,f,g,d,c[b+7],22,-45705983),d=a(d,e,f,g,c[b+8],7,1770035416),g=a(g,d,e,f,c[b+9],12,-1958414417),f=a(f,g,d,e,c[b+10],17,-42063),e=a(e,f,g,d,c[b+11],22,-1990404162),d=a(d,e,f,g,c[b+12],7,1804603682),g=a(g,d,e,f,c[b+13],12,-40341101),f=a(f,g,d,e,c[b+14],17,-1502002290),e=a(e,f,g,d,c[b+15],22,1236535329),d=k(d,e,f,g,c[b+1],5,-165796510),g=k(g,d,e,f,c[b+6],9,-1069501632),f=k(f,g,d,e,c[b+11],14,643717713),e=k(e,f,g,d,c[b],20,-373897302),d=k(d,e,f,g,c[b+5],5,-701558691),g=k(g,d,e,f,c[b+10],9,38016083),f=k(f,g,d,e,c[b+15],14,-660478335),e=k(e,f,g,d,c[b+4],20,-405537848),d=k(d,e,f,g,c[b+9],5,568446438),g=k(g,d,e,f,c[b+14],9,-1019803690),f=k(f,g,d,e,c[b+3],14,-187363961),e=k(e,f,g,d,c[b+8],20,1163531501),d=k(d,e,f,g,c[b+13],5,-1444681467),g=k(g,d,e,f,c[b+2],9,-51403784),f=k(f,g,d,e,c[b+7],14,1735328473),e=k(e,f,g,d,c[b+12],20,-1926607734),d=n(e^f^g,d,e,c[b+5],4,-378558),g=n(d^e^f,g,d,c[b+8],11,-2022574463),f=n(g^d^e,f,g,c[b+11],16,1839030562),e=n(f^g^d,e,f,c[b+14],23,-35309556),d=n(e^f^g,d,e,c[b+1],4,-1530992060),g=n(d^e^f,g,d,c[b+4],11,1272893353),f=n(g^d^e,f,g,c[b+7],16,-155497632),e=n(f^g^d,e,f,c[b+10],23,-1094730640),d=n(e^f^g,d,e,c[b+13],4,681279174),g=n(d^e^f,g,d,c[b],11,-358537222),f=n(g^d^e,f,g,c[b+3],16,-722521979),e=n(f^g^d,e,f,c[b+6],23,76029189),d=n(e^f^g,d,e,c[b+9],4,-640364487),g=n(d^e^f,g,d,c[b+12],11,-421815835),f=n(g^d^e,f,g,c[b+15],16,530742520),e=n(f^g^d,e,f,c[b+2],23,-995338651),d=h(d,e,f,g,c[b],6,-198630844),g=h(g,d,e,f,c[b+7],10,1126891415),f=h(f,g,d,e,c[b+14],15,-1416354905),e=h(e,f,g,d,c[b+5],21,-57434055),d=h(d,e,f,g,c[b+12],6,1700485571),g=h(g,d,e,f,c[b+3],10,-1894986606),f=h(f,g,d,e,c[b+10],15,-1051523),e=h(e,f,g,d,c[b+1],21,-2054922799),d=h(d,e,f,g,c[b+8],6,1873313359),g=h(g,d,e,f,c[b+15],10,-30611744),f=h(f,g,d,e,c[b+6],15,-1560198380),e=h(e,f,g,d,c[b+13],21,1309151649),d=h(d,e,f,g,c[b+4],6,-145523070),g=h(g,d,e,f,c[b+11],10,-1120210379),f=h(f,g,d,e,c[b+2],15,718787259),e=h(e,f,g,d,c[b+9],21,-343485551),d=l(d,m),e=l(e,q),f=l(f,v),g=l(g,r);return[d,e,f,g]}function v(c){var a,b="";for(a=0;a<32*c.length;a+=8)b+=String.fromCharCode(c[a>>5]>>>a%32&255);return b}function p(c){var a,b=[];b[(c.length>>2)-1]=void 0;for(a=0;a<b.length;a+=1)b[a]=0;for(a=0;a<8*c.length;a+=8)b[a>>5]|=(c.charCodeAt(a/8)&255)<<a%32;return b}function m(a){return v(q(p(a),8*a.length))}function r(a,h){var b,k=p(a),m=[],l=[];m[15]=l[15]=void 0;16<k.length&&(k=q(k,8*a.length));for(b=0;16>b;b+=1)m[b]=k[b]^909522486,l[b]=k[b]^1549556828;b=q(m.concat(p(h)),512+8*h.length);return v(q(l.concat(b),640))}function x(a){var k="",b,h;for(h=0;h<a.length;h+=1)b=a.charCodeAt(h),k+="0123456789abcdef".charAt(b>>>4&15)+"0123456789abcdef".charAt(b&15);return k}function w(a,h,b){h?b?a=r(unescape(encodeURIComponent(h)),unescape(encodeURIComponent(a))):(a=r(unescape(encodeURIComponent(h)),unescape(encodeURIComponent(a))),a=x(a)):a=b?m(unescape(encodeURIComponent(a))):x(m(unescape(encodeURIComponent(a))));return a}"function"===typeof define&&define.amd?define(function(){return w}):"object"===typeof module&&module.exports?module.exports=w:t.md5=w})(this);(function(){function t(a){a+="=";for(var k=document.cookie.split(";"),h=0;h<k.length;h++){for(var l=k[h];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(a))return l.substring(a.length,l.length)}return""}var l=function(){};l.prototype.DEBUG=!0;l.prototype.TIMEOUT=5E3;l.prototype.LinkedME_KEY="";l.prototype.LinkedME_SESSION_ID="";l.prototype.version="1.0.2";var n=function(){};n.prototype.XHRRequest=function(a,k,h,l,n,p){var m=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");m.ontimeout=function(){n("timeout",null,504)};m.onerror=function(a){n(a.error||"Error in API: "+m.status,null,m.status)};m.onreadystatechange=function(){var a;if(4===m.readyState)if(200===m.status){if(p)a=m.responseText;else try{a=JSON.parse(m.responseText)}catch(h){a={}}n(null,a,m.status)}else 402===m.status?n("Not enough credits to redeem.",null,m.status):"4"!==m.status.toString().substring(0,1)&&"5"!==m.status.toString().substring(0,1)||n("Error in API: "+m.status,null,m.status)};try{m.open(h,a,!0),m.timeout=this.TIMEOUT,m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.send(k)}catch(r){console.log(r)}};n.prototype.LinkedME_LIVE_URL="https://lkme.cc/i";window.server=new n;l.prototype.init=function(a,k,h){this.DEBUG&&console.log("linkedme.init()");!k&&(k={});if(void 0==k.type||null==k.type)k.type="live";var l=server.LinkedME_LIVE_URL+"/sdk/webinit";this.LinkedME_SESSION_ID&&this.LinkedME_KEY==a?(a=t("identity_id"),null!=h&&h(null,{identity_id:a,session_id:this.LinkedME_SESSION_ID},null)):(this.LinkedME_KEY=a,server.XHRRequest(l+"?linkedme_key="+a+"&identity_id="+t("identity_id")+"&type="+k.type,k,"get",null,function(a,k){this.LinkedME_SESSION_ID=k.session_id;document.cookie="identity_id="+k.identity_id;null!=h&&h(a,k)},null))};l.prototype.link=function(a,k,h){this.DEBUG&&console.log("linkedme.link()");var l=server.LinkedME_LIVE_URL+"/sdk/url";!a&&(a={});null==h&&(h=!1);a.linkedme_key=this.LinkedME_KEY;a.session_id=this.LinkedME_SESSION_ID;a.identity_id=t("identity_id");if(a.params&&""!==a.params.trim())try{var n="string"===typeof a.params?JSON.parse(a.params):a.params;a.params={};a.params.$control=n;a.params.$og_title="DetailViewController";a.params=JSON.stringify(a.params)}catch(m){alert("params\u7684JSON\u6570\u636e\u683c\u5f0f\u6709\u8bef, \u63d0\u793a:JSON\u683c\u5f0f\u7684key\u548cvalue\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765!");k("params\u7684JSON\u6570\u636e\u683c\u5f0f\u6709\u8bef, \u63d0\u793a:JSON\u683c\u5f0f\u7684key\u548cvalue\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765!",{url:null});return}else a.params="{}";if(void 0==a.type||null==a.type)a.type="live";a.source="Web";a.sdk_version="web1.0.2";a.timestamp=+new Date;a.sign="";a.deeplink_md5=md5(a.linkedme_key.trim()+"&"+a.tags+"&"+a.channel+"&"+a.feature+"&"+a.stage+"&"+a.params);var n=[],p;for(p in a)n.push(encodeURIComponent(p)+"="+encodeURIComponent(a[p]));server.XHRRequest(l,n.join("&"),"post",null,function(a,l){a||l.err_code||!h||(window.location=l.url);k(a,l)})};l.prototype.close=function(a){this.DEBUG&&console.log("linkedme.close()");!a&&(a={});if(void 0==a.type||null==a.type)a.type="live";a.linkedme_key=this.LinkedME_KEY;a.session_id=this.LinkedME_SESSION_ID;a.identity_id=t("identity_id");a.timestamp=+new Date;var k=[],h;for(h in a)k.push(encodeURIComponent(h)+"="+encodeURIComponent(a[h]));server.XHRRequest(server.LinkedME_LIVE_URL+"/sdk/webclose",k.join("&"),"post",null,function(a,h){})};window.linkedme=new l;window.onbeforeunload=function(){linkedme.close(null)}})();